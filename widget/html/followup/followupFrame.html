<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>随访信息</title>
    <link rel="stylesheet" type="text/css" href="../css/history.css" />
    <link rel="stylesheet" type="text/css" href="../css/button.css" />
    <script type="text/javascript" src="../script/api.js"></script>
    <script type="text/javascript" src="../script/util.js"></script>
</head>

<body class="body-silver">
    <div id="wrap" class="flex-wrap flex-vertical">
        <header class="header-silver">
            <a id="left" tapmode="" onclick="window.closeWin();" class="button button-raised button-silver">
                    &lt; 取消
                </a>
            <div id="middle">
                <span id="title">随访信息</span>
            </div>
            <a id="right" tapmode="" onclick="saveFollowUp();" class="button button-raised button-blue">
                    保存
                </a>
        </header>
        <div id="main" class="flex-con">
            <div class="groupName">病情</div>
            <div class="group">
                <div class="field textarea_field bottom">
                    <div class="textarea_key">病情</div>
                    <div class="textarea_value">
                        <textarea id="condition"></textarea>
                    </div>
                </div>
            </div>
            <div class="groupName">检查</div>
            <div class="group">
                <div class="field" onclick="openWin('physical');">
                    <div class="key">体检信息</div>
                    <div class="value more"><span>&gt;</span></div>
                </div>
                <div class="field bottom">
                    <div class="key">辅助检查</div>
                    <div class="value more"><span>&gt;</span></div>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>
<script type="text/javascript">
/**
 * [apiready description]
 * @return {[type]} [description]
 */
apiready = function() {
    window.closeWin = function(winName) {
        api.closeWin();
    }

    history_id = api.pageParam.history_id;
    follow_up_id = api.pageParam.follow_up_id;
    physical_id = "";
    data = {};
    type = "";

    if (follow_up_id != "" && follow_up_id != undefined && follow_up_id != null) {
        type = "modi";
    }
    if (type == "modi") {
        data = getFollowUp(follow_up_id);
        history_id = data.history_id;
        physical_id = data.physical_pointer;
    }
}

function saveFollowUp() {

}

function openWin(type) {
    var data = {};
    switch (type) {
        case 'physical':
            data = {
                "source": "follow_up",
                "id": physical_id
            };
            break;
        default:
            break;
    }
    api.openWin({
        name: type,
        url: './' + type + '.html',
        pageParam: {
            data: data
        },
        reload: false,
        bounces: false,
        vScrollBarEnabled: false,
        animation: {
            type: "movein",
            subType: "from_right",
            duration: 300
        }
    })
}
</script>

</html>
